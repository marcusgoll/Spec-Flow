{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Feature Shipped Event",
  "description": "Webhook payload sent when a feature is deployed to production",
  "type": "object",
  "required": ["event_type", "timestamp", "data", "signature"],
  "properties": {
    "event_type": {
      "const": "feature.shipped",
      "description": "Event identifier for webhook routing"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of when the event occurred",
      "example": "2025-11-10T14:30:00Z"
    },
    "data": {
      "type": "object",
      "required": ["slug", "version", "environment", "deploy_url"],
      "properties": {
        "slug": {
          "type": "string",
          "description": "Feature slug identifier",
          "example": "user-authentication"
        },
        "version": {
          "type": "string",
          "pattern": "^v\\d+\\.\\d+\\.\\d+$",
          "description": "Semantic version of the release",
          "example": "v1.2.3"
        },
        "environment": {
          "type": "string",
          "enum": ["staging", "production"],
          "description": "Deployment environment"
        },
        "deploy_url": {
          "type": "string",
          "format": "uri",
          "description": "URL where the feature is deployed",
          "example": "https://app.example.com"
        },
        "epic": {
          "type": "string",
          "description": "Epic label if part of an epic",
          "example": "epic:authentication"
        },
        "sprint": {
          "type": "string",
          "description": "Sprint milestone if applicable",
          "example": "Sprint 5 (Nov 10-24)"
        }
      }
    },
    "signature": {
      "type": "string",
      "description": "HMAC-SHA256 signature for payload verification",
      "pattern": "^[a-f0-9]{64}$",
      "example": "a3d5e8f2b1c4d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1"
    }
  },
  "examples": [
    {
      "event_type": "feature.shipped",
      "timestamp": "2025-11-10T14:30:00Z",
      "data": {
        "slug": "user-authentication",
        "version": "v1.2.3",
        "environment": "production",
        "deploy_url": "https://app.example.com",
        "epic": "epic:security",
        "sprint": "Sprint 5 (Nov 10-24)"
      },
      "signature": "a3d5e8f2b1c4d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1"
    }
  ]
}
