{
  "version": "1.0",
  "description": "Shared routing configuration for sub-agent auto-routing and /route-agent command",
  "specialists": {
    "backend-dev": {
      "description": "Backend service implementation (APIs, background jobs, business logic)",
      "triggers": {
        "filePaths": [
          "api/**/*.py",
          "app/**/*.py",
          "backend/**/*.py",
          "services/**/*.py",
          "api/**/*.ts",
          "backend/**/*.ts",
          "src/server/**/*.ts"
        ],
        "keywords": [
          "endpoint",
          "api",
          "route",
          "fastapi",
          "express",
          "controller",
          "service layer",
          "business logic",
          "background job"
        ],
        "intentPatterns": [
          "implement.*endpoint",
          "create.*api",
          "build.*backend",
          "add.*route"
        ]
      },
      "contextFiles": ["spec.md", "plan.md", "tasks.md"],
      "priority": "high",
      "specificity": 0
    },
    "frontend-shipper": {
      "description": "Frontend UI implementation (components, pages, client-side logic)",
      "triggers": {
        "filePaths": [
          "apps/**/*.tsx",
          "apps/**/*.ts",
          "apps/**/*.jsx",
          "apps/**/*.js",
          "src/components/**/*",
          "src/pages/**/*",
          "components/**/*",
          "pages/**/*"
        ],
        "keywords": [
          "component",
          "react",
          "ui",
          "page",
          "form",
          "button",
          "modal",
          "frontend",
          "client-side",
          "nextjs",
          "vue",
          "svelte"
        ],
        "intentPatterns": [
          "implement.*component",
          "create.*page",
          "build.*ui",
          "add.*form"
        ]
      },
      "contextFiles": ["spec.md", "plan.md", "tasks.md", "visuals/screens.yaml"],
      "priority": "high",
      "specificity": 0
    },
    "database-architect": {
      "description": "Database schema design, migrations, query optimization",
      "triggers": {
        "filePaths": [
          "api/migrations/**/*",
          "migrations/**/*",
          "api/alembic/**/*",
          "alembic/**/*",
          "db/**/*",
          "database/**/*",
          "prisma/schema.prisma",
          "drizzle/**/*"
        ],
        "keywords": [
          "migration",
          "schema",
          "database",
          "table",
          "column",
          "index",
          "foreign key",
          "alembic",
          "prisma",
          "drizzle",
          "sql",
          "query optimization"
        ],
        "intentPatterns": [
          "create.*migration",
          "add.*table",
          "modify.*schema",
          "design.*database"
        ]
      },
      "contextFiles": ["spec.md", "plan.md", "tasks.md", "docs/project/data-architecture.md"],
      "priority": "high",
      "specificity": 5
    },
    "contracts-sdk": {
      "description": "API contracts, OpenAPI schemas, shared types, SDK generation",
      "triggers": {
        "filePaths": [
          "**/*.openapi.yaml",
          "**/*.openapi.json",
          "**/openapi.yaml",
          "**/openapi.json",
          "contracts/**/*",
          "schemas/**/*",
          "api/types/**/*",
          "shared/**/*.ts"
        ],
        "keywords": [
          "openapi",
          "contract",
          "schema",
          "api spec",
          "sdk",
          "type definition",
          "shared types",
          "breaking change"
        ],
        "intentPatterns": [
          "update.*contract",
          "modify.*openapi",
          "add.*endpoint.*spec",
          "generate.*sdk"
        ]
      },
      "contextFiles": ["spec.md", "plan.md", "tasks.md", "docs/project/api-strategy.md"],
      "priority": "medium",
      "specificity": 5
    },
    "senior-code-reviewer": {
      "description": "Code review for quality, DRY, KISS, contract compliance",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "review",
          "code quality",
          "dry",
          "kiss",
          "refactor",
          "technical debt",
          "best practices",
          "code smell"
        ],
        "intentPatterns": [
          "review.*code",
          "check.*quality",
          "validate.*implementation"
        ]
      },
      "contextFiles": ["spec.md", "plan.md", "tasks.md"],
      "priority": "medium",
      "specificity": 0
    },
    "qa-test": {
      "description": "Test creation, QA planning, automated test suites",
      "triggers": {
        "filePaths": [
          "**/tests/**/*",
          "**/*.test.ts",
          "**/*.test.py",
          "**/*.spec.ts",
          "**/*.spec.py",
          "test/**/*",
          "__tests__/**/*"
        ],
        "keywords": [
          "test",
          "testing",
          "qa",
          "e2e",
          "integration test",
          "unit test",
          "test coverage",
          "playwright",
          "pytest",
          "jest",
          "vitest"
        ],
        "intentPatterns": [
          "write.*test",
          "create.*test.*suite",
          "add.*coverage",
          "test.*feature"
        ]
      },
      "contextFiles": ["spec.md", "plan.md", "tasks.md"],
      "priority": "high",
      "specificity": 5
    },
    "debugger": {
      "description": "Error triage, bug investigation, root cause analysis",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "bug",
          "error",
          "failing",
          "crash",
          "exception",
          "debug",
          "investigate",
          "broken",
          "not working",
          "issue"
        ],
        "intentPatterns": [
          "fix.*bug",
          "debug.*error",
          "investigate.*failure",
          "why.*not.*working"
        ]
      },
      "contextFiles": ["spec.md", "tasks.md", "error-log.md"],
      "priority": "high",
      "specificity": 0
    },
    "coverage-enhancer": {
      "description": "Test coverage improvement, TDD workflow, high-risk area testing",
      "triggers": {
        "filePaths": [
          "**/tests/**/*",
          "**/*.test.*",
          "**/*.spec.*"
        ],
        "keywords": [
          "coverage",
          "tdd",
          "test-driven",
          "increase coverage",
          "untested",
          "test gap"
        ],
        "intentPatterns": [
          "improve.*coverage",
          "add.*test.*coverage",
          "tdd.*workflow"
        ]
      },
      "contextFiles": ["spec.md", "tasks.md"],
      "priority": "medium",
      "specificity": 5
    },
    "ci-cd-release": {
      "description": "CI/CD pipelines, release automation, deployment workflows",
      "triggers": {
        "filePaths": [
          ".github/workflows/**/*",
          ".gitlab-ci.yml",
          "Jenkinsfile",
          ".circleci/**/*",
          "azure-pipelines.yml"
        ],
        "keywords": [
          "ci",
          "cd",
          "pipeline",
          "github actions",
          "deployment",
          "release",
          "workflow",
          "automation"
        ],
        "intentPatterns": [
          "create.*pipeline",
          "setup.*ci",
          "automate.*deployment",
          "release.*workflow"
        ]
      },
      "contextFiles": ["spec.md", "plan.md", "docs/project/deployment-strategy.md"],
      "priority": "medium",
      "specificity": 5
    },
    "refactor-planner": {
      "description": "Refactoring analysis and planning, code structure improvement",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "refactor",
          "restructure",
          "modernize",
          "improve structure",
          "code organization",
          "legacy code",
          "technical debt"
        ],
        "intentPatterns": [
          "refactor.*",
          "restructure.*code",
          "modernize.*",
          "improve.*organization"
        ]
      },
      "contextFiles": ["spec.md"],
      "priority": "medium",
      "specificity": 0
    },
    "web-research-specialist": {
      "description": "Internet research, GitHub issues, Stack Overflow, technical documentation",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "research",
          "search online",
          "find solution",
          "stack overflow",
          "github issue",
          "documentation",
          "how do others"
        ],
        "intentPatterns": [
          "research.*online",
          "search.*for.*solution",
          "find.*examples",
          "how.*others.*implement"
        ]
      },
      "contextFiles": ["spec.md"],
      "priority": "low",
      "specificity": 0
    },
    "Explore": {
      "description": "Fast codebase exploration, file pattern matching, keyword searches",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "find",
          "search",
          "locate",
          "where is",
          "explore",
          "codebase structure"
        ],
        "intentPatterns": [
          "find.*file",
          "search.*for.*",
          "where.*is.*",
          "explore.*codebase"
        ]
      },
      "contextFiles": [],
      "priority": "low",
      "specificity": 0
    },
    "general-purpose": {
      "description": "Multi-step tasks, complex research, coordination across domains",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "complex task",
          "multiple steps",
          "coordinate",
          "full implementation"
        ],
        "intentPatterns": [
          "implement.*feature.*end.*to.*end",
          "coordinate.*across.*"
        ]
      },
      "contextFiles": ["spec.md", "plan.md", "tasks.md"],
      "priority": "low",
      "specificity": 0
    },
    "auto-error-resolver": {
      "description": "Automatic TypeScript compilation error fixing",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "typescript error",
          "compilation error",
          "type error",
          "tsc error"
        ],
        "intentPatterns": [
          "fix.*typescript.*error",
          "resolve.*compilation.*error"
        ]
      },
      "contextFiles": ["tasks.md"],
      "priority": "medium",
      "specificity": 5
    },
    "spec-phase-agent": {
      "description": "Feature specification generation from natural language",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "create spec",
          "specification",
          "requirements",
          "feature definition"
        ],
        "intentPatterns": [
          "create.*spec.*for",
          "write.*specification"
        ]
      },
      "contextFiles": [],
      "priority": "high",
      "specificity": 10
    },
    "clarify-phase-agent": {
      "description": "Ambiguity reduction via targeted questions",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "clarify",
          "ambiguous",
          "unclear",
          "questions",
          "requirements clarification"
        ],
        "intentPatterns": [
          "clarify.*requirements",
          "reduce.*ambiguity"
        ]
      },
      "contextFiles": ["spec.md"],
      "priority": "high",
      "specificity": 10
    },
    "plan-phase-agent": {
      "description": "Design artifacts generation (research + architecture planning)",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "create plan",
          "architecture",
          "design",
          "research",
          "planning"
        ],
        "intentPatterns": [
          "create.*plan",
          "design.*architecture"
        ]
      },
      "contextFiles": ["spec.md", "research.md"],
      "priority": "high",
      "specificity": 10
    },
    "tasks-phase-agent": {
      "description": "TDD task breakdown from design artifacts",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "break down tasks",
          "task list",
          "implementation tasks",
          "tdd tasks"
        ],
        "intentPatterns": [
          "break.*down.*tasks",
          "create.*task.*list"
        ]
      },
      "contextFiles": ["spec.md", "plan.md", "research.md"],
      "priority": "high",
      "specificity": 10
    },
    "analyze-phase-agent": {
      "description": "Cross-artifact consistency validation, breaking change detection",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "validate",
          "consistency",
          "breaking change",
          "analysis"
        ],
        "intentPatterns": [
          "validate.*artifacts",
          "check.*consistency"
        ]
      },
      "contextFiles": ["spec.md", "plan.md", "tasks.md"],
      "priority": "medium",
      "specificity": 10
    },
    "optimize-phase-agent": {
      "description": "Production readiness validation (performance, security, a11y)",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "optimize",
          "performance",
          "accessibility",
          "security review",
          "production readiness"
        ],
        "intentPatterns": [
          "optimize.*for.*production",
          "validate.*production.*readiness"
        ]
      },
      "contextFiles": ["spec.md", "tasks.md"],
      "priority": "medium",
      "specificity": 10
    },
    "ship-staging-phase-agent": {
      "description": "Staging deployment with auto-merge",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "deploy staging",
          "ship to staging",
          "staging deployment"
        ],
        "intentPatterns": [
          "deploy.*to.*staging",
          "ship.*staging"
        ]
      },
      "contextFiles": ["spec.md", "tasks.md"],
      "priority": "medium",
      "specificity": 10
    },
    "ship-prod-phase-agent": {
      "description": "Production deployment with versioning and release",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "deploy production",
          "ship to prod",
          "production deployment",
          "release"
        ],
        "intentPatterns": [
          "deploy.*to.*production",
          "ship.*prod",
          "release.*to.*production"
        ]
      },
      "contextFiles": ["spec.md", "tasks.md"],
      "priority": "high",
      "specificity": 10
    },
    "finalize-phase-agent": {
      "description": "Workflow completion, artifact archival, roadmap updates",
      "triggers": {
        "filePaths": [],
        "keywords": [
          "finalize",
          "complete workflow",
          "archive",
          "wrap up"
        ],
        "intentPatterns": [
          "finalize.*feature",
          "complete.*workflow"
        ]
      },
      "contextFiles": ["spec.md", "tasks.md"],
      "priority": "low",
      "specificity": 10
    }
  },
  "chainRules": {
    "backend-dev": ["qa-test"],
    "frontend-shipper": ["qa-test"],
    "database-architect": ["backend-dev"],
    "contracts-sdk": ["backend-dev", "frontend-shipper"],
    "refactor-planner": ["senior-code-reviewer"]
  },
  "tieBreaking": {
    "specificityBonus": {
      "database-architect": 5,
      "qa-test": 5,
      "contracts-sdk": 5,
      "ci-cd-release": 5,
      "auto-error-resolver": 5,
      "coverage-enhancer": 5,
      "spec-phase-agent": 10,
      "clarify-phase-agent": 10,
      "plan-phase-agent": 10,
      "tasks-phase-agent": 10,
      "analyze-phase-agent": 10,
      "optimize-phase-agent": 10,
      "ship-staging-phase-agent": 10,
      "ship-prod-phase-agent": 10,
      "finalize-phase-agent": 10
    },
    "conflictResolution": [
      ["database-architect", "backend-dev"],
      ["qa-test", "debugger"],
      ["contracts-sdk", "backend-dev"],
      ["coverage-enhancer", "qa-test"],
      ["auto-error-resolver", "debugger"]
    ]
  },
  "antiLoop": {
    "maxChainDepth": 3,
    "sessionHistoryPath": "/tmp/claude-agent-chain.json",
    "cooldownSeconds": 5
  },
  "confidenceThreshold": {
    "minScore": 10,
    "description": "Only auto-route if specialist score exceeds this threshold"
  }
}
