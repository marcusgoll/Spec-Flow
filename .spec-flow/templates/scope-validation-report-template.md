# Scope Validation Report

**Epic/Feature**: {EPIC_SLUG}
**Iteration**: {ITERATION_NUMBER}
**Validated At**: {ISO8601_TIMESTAMP}
**Spec Source**: {SPEC_FILE_PATH}

---

## Validation Summary

- **Total Gaps Discovered**: {TOTAL_GAPS}
- **In Scope**: {IN_SCOPE_COUNT} ✅
- **Out of Scope**: {OUT_OF_SCOPE_COUNT} ❌
- **Ambiguous**: {AMBIGUOUS_COUNT} ⚠️

---

## Gap {GAP_ID}: {GAP_TITLE}

**Status**: {SCOPE_STATUS}

### Evidence Analysis

#### Check 1: Mentioned in Objective/Requirements?
{OBJECTIVE_CHECK_RESULT}
<!-- Example:
✅ PASS - Gap mentioned in epic-spec.md:45 "Backend authentication endpoints"
❌ FAIL - Gap not mentioned in objective or requirements sections
-->

#### Check 2: Listed in "Out of Scope"?
{OUT_OF_SCOPE_CHECK_RESULT}
<!-- Example:
✅ PASS - Gap NOT listed in "Out of Scope" section
❌ FAIL - Gap explicitly excluded in epic-spec.md:52 "Out of Scope: Social provider analytics"
-->

#### Check 3: Aligns with Subsystems?
{SUBSYSTEM_CHECK_RESULT}
<!-- Example:
✅ PASS - Backend subsystem marked as involved, gap affects backend API
❌ FAIL - Gap requires infrastructure subsystem, which was not marked as involved
-->

#### Check 4: Related to Acceptance Criteria?
{ACCEPTANCE_CRITERIA_CHECK_RESULT}
<!-- Example:
✅ PASS - Aligns with acceptance criterion: "User can view their profile"
❌ FAIL - No acceptance criteria mention this functionality
-->

### Validation Result

{VALIDATION_REASONING}
<!-- Example for IN SCOPE:
All checks passed. This gap represents functionality that was defined in the original spec but not implemented in iteration 1. It should be addressed through supplemental tasks.
-->

<!-- Example for OUT OF SCOPE:
Failed Check 2: Gap is explicitly listed in "Out of Scope" section. This represents feature creep and should be deferred to a new epic after current work completes.
-->

<!-- Example for AMBIGUOUS:
Mixed results. Gap not explicitly mentioned or excluded. User decision required to determine if this is implicit requirement or new functionality.
-->

### Recommendation

{RECOMMENDATION}
<!-- Examples:
- IN SCOPE: "Generate supplemental tasks for implementation in iteration {N}"
- OUT OF SCOPE: "Create new epic: 'Social Login Integration' after current epic ships"
- AMBIGUOUS: "User should decide based on project priorities and timeline constraints"
-->

### Action

{ACTION_TAKEN}
<!-- Examples:
- IN SCOPE: "Generated 3 supplemental tasks (T031, T032, T033) and appended to tasks.md"
- OUT OF SCOPE: "BLOCKED - Will not implement in current iteration"
- AMBIGUOUS: "Awaiting user decision"
-->

---

## Scope Validation Algorithm

This report was generated using the following validation algorithm:

1. **Objective Check**: Search for gap keywords in spec "Objective" and "Requirements" sections
2. **Exclusion Check**: Verify gap is NOT in "Out of Scope" section
3. **Subsystem Check**: Verify gap aligns with subsystems marked as "involved"
4. **Acceptance Criteria Check**: Verify gap relates to defined acceptance criteria

### Scoring

- **IN SCOPE**: All 4 checks pass OR Checks 2, 3, 4 pass (implicit requirement)
- **OUT OF SCOPE**: Check 2 fails (explicitly excluded) OR major misalignment with subsystems
- **AMBIGUOUS**: Mixed results, user decision required

---

## Spec Excerpts

### Objective Section

```markdown
{OBJECTIVE_EXCERPT}
```

### Out of Scope Section

```markdown
{OUT_OF_SCOPE_EXCERPT}
```

### Subsystems Section

```markdown
{SUBSYSTEMS_EXCERPT}
```

### Acceptance Criteria

```markdown
{ACCEPTANCE_CRITERIA_EXCERPT}
```

---

## Next Actions

### For In-Scope Gaps ({IN_SCOPE_COUNT})

1. Review generated supplemental tasks in tasks.md
2. Ensure task dependencies are correct
3. Run `/epic continue` or `/feature continue` to start iteration {NEXT_ITERATION}
4. Execute supplemental tasks using TDD workflow
5. Re-run `/optimize` quality gates
6. Re-validate on staging

### For Out-of-Scope Gaps ({OUT_OF_SCOPE_COUNT})

1. Document gaps in roadmap using `/roadmap add`
2. Create new epic/feature for deferred functionality
3. Prioritize against other roadmap items
4. Ship current epic with original scope + in-scope gap fixes

### For Ambiguous Gaps ({AMBIGUOUS_COUNT})

1. Review validation evidence above
2. Consider project timeline and priorities
3. Make explicit decision: Include or Defer
4. If including: Re-run validation with manual override
5. If deferring: Add to roadmap for future work

---

**Generated by**: Spec-Flow Feedback Loop System v3.0.0
**Timestamp**: {ISO8601_TIMESTAMP}
