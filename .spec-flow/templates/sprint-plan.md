---
# Sprint Plan Template (v7.2)
# Markdown + YAML format for epic sprint breakdown and dependency graph
# Generated by: /plan command (meta-prompting)
# Referenced by: /implement-epic command

epic_number: {{EPIC_NUMBER}}
epic_slug: {{EPIC_SLUG}}
total_sprints: {{TOTAL_SPRINTS}}
total_estimated_hours: {{TOTAL_ESTIMATED_HOURS}}
generated: {{GENERATED_TIMESTAMP}}
---

# Sprint Plan: {{EPIC_SLUG}}

## Overview

**Epic**: Epic {{EPIC_NUMBER}} - {{EPIC_TITLE}}
**Total Sprints**: {{TOTAL_SPRINTS}}
**Estimated Effort**: {{TOTAL_ESTIMATED_HOURS}} hours
**Generated**: {{GENERATED_TIMESTAMP}}

### Prototype Source

{{#PROTOTYPE_SOURCE}}
| Field | Value |
|-------|-------|
| Source | Prototype Discovery |
| Prototype Path | {{PROTOTYPE_PATH}} |
| Features Discovered | {{FEATURES_COUNT}} |
| Components Required | {{COMPONENTS_COUNT}} |
| Theme Status | {{THEME_LOCKED}} |
{{/PROTOTYPE_SOURCE}}
{{^PROTOTYPE_SOURCE}}
*Not from prototype - manual specification*
{{/PROTOTYPE_SOURCE}}

---

{{#SPRINTS}}
## Sprint {{SPRINT_ID}}: {{SPRINT_NAME}}

**Sprint Number**: {{SPRINT_NUMBER}}
**Estimated Hours**: {{ESTIMATED_HOURS}}
**Complexity**: {{COMPLEXITY}}
**Dependencies**: {{DEPENDENCIES}}
**Execution Layer**: {{EXECUTION_LAYER}}

### Source Features (from Prototype)

<!-- If epic created via /prototype extract --to-epic, track which discovered features this sprint covers -->
{{#SOURCE_FEATURES}}
- **{{FEATURE_NAME}}** - from discovered-features.md
{{/SOURCE_FEATURES}}
{{^SOURCE_FEATURES}}
*Not from prototype - manual specification*
{{/SOURCE_FEATURES}}

### Prototype Screens

<!-- Mockups that define this sprint's UI deliverables -->
{{#PROTOTYPE_SCREENS}}
- `{{SCREEN_PATH}}`
{{/PROTOTYPE_SCREENS}}
{{^PROTOTYPE_SCREENS}}
*No prototype screens linked*
{{/PROTOTYPE_SCREENS}}

### Component Deliverables

<!-- Components from component-inventory.md that this sprint must implement -->
{{#COMPONENT_DELIVERABLES}}
- **{{COMPONENT_NAME}}** ({{OCCURRENCES}} occurrences) - {{BUILD_PRIORITY}}
{{/COMPONENT_DELIVERABLES}}
{{^COMPONENT_DELIVERABLES}}
*No pre-identified components*
{{/COMPONENT_DELIVERABLES}}

### Description

{{SPRINT_DESCRIPTION}}

### Subsystems Involved

{{#SUBSYSTEMS}}
- {{SUBSYSTEM_NAME}}
{{/SUBSYSTEMS}}

### Primary Deliverables

{{#DELIVERABLES}}
- **{{DELIVERABLE_NAME}}** - {{DELIVERABLE_DESCRIPTION}}
{{/DELIVERABLES}}

### Acceptance Criteria

{{#ACCEPTANCE_CRITERIA}}
- {{CRITERION}}
{{/ACCEPTANCE_CRITERIA}}

### Technical Notes

{{TECHNICAL_NOTES}}

### Risks

{{#RISKS}}
- **{{RISK_TITLE}}** ({{SEVERITY}})
  - Impact: {{IMPACT}}
  - Mitigation: {{MITIGATION}}
{{/RISKS}}

---

{{/SPRINTS}}

## Execution Strategy

### Execution Layers

Sprints are organized into parallel execution layers based on dependency analysis:

| Layer | Sprints | Estimated Hours | Can Execute Concurrently |
|-------|---------|-----------------|--------------------------|
{{#EXECUTION_LAYERS}}
| {{LAYER_NUMBER}} | {{SPRINT_IDS}} | {{TOTAL_HOURS}}h | {{CONCURRENT}} |
{{/EXECUTION_LAYERS}}

**Execution Rules**:
- All sprints in a layer can execute in parallel
- Layer N+1 cannot start until all sprints in Layer N complete
- Total sequential time: {{CRITICAL_PATH_HOURS}} hours
- Maximum parallelization: {{MAX_PARALLEL_SPRINTS}} concurrent sprints

### Critical Path Analysis

**Critical Path**: {{CRITICAL_PATH_SPRINTS}}
**Total Duration**: {{CRITICAL_PATH_HOURS}} hours
**Bottleneck Sprint**: {{BOTTLENECK_SPRINT}}

```
{{CRITICAL_PATH_DIAGRAM}}
```

**Impact of Delays**:
{{#DELAY_IMPACTS}}
- If {{SPRINT_ID}} delayed by 1 hour → Total delay: {{IMPACT_HOURS}} hours
{{/DELAY_IMPACTS}}

---

## Contract Locking Strategy

### API Contracts

{{#API_CONTRACTS}}
#### {{CONTRACT_NAME}}

**File**: `contracts/{{CONTRACT_FILE}}`
**Lock Sprint**: {{LOCK_SPRINT}}
**Consumers**: {{CONSUMER_SPRINTS}}
**Breaking Changes Allowed Until**: Sprint {{LOCK_SPRINT}} completes

**Endpoints**:
{{#ENDPOINTS}}
- `{{METHOD}} {{PATH}}` - {{DESCRIPTION}}
{{/ENDPOINTS}}

{{/API_CONTRACTS}}

### Database Schemas

{{#DATABASE_CONTRACTS}}
#### {{SCHEMA_NAME}}

**Tables**: {{TABLE_NAMES}}
**Lock Sprint**: {{LOCK_SPRINT}}
**Consumers**: {{CONSUMER_SPRINTS}}

**Migration Strategy**: {{MIGRATION_STRATEGY}}

{{/DATABASE_CONTRACTS}}

### Component Interfaces

{{#COMPONENT_CONTRACTS}}
#### {{COMPONENT_NAME}}

**Type**: {{COMPONENT_TYPE}}
**Lock Sprint**: {{LOCK_SPRINT}}
**Props/Interface**: `{{INTERFACE_FILE}}`
**Consumers**: {{CONSUMER_SPRINTS}}

{{/COMPONENT_CONTRACTS}}

---

## Resource Allocation

### Agent Assignments

| Sprint | Primary Agent | Secondary Agent | Rationale |
|--------|---------------|-----------------|-----------|
{{#AGENT_ASSIGNMENTS}}
| {{SPRINT_ID}} | {{PRIMARY_AGENT}} | {{SECONDARY_AGENT}} | {{RATIONALE}} |
{{/AGENT_ASSIGNMENTS}}

### Workload Distribution

| Agent | Total Hours | Sprints Assigned | Utilization |
|-------|-------------|------------------|-------------|
{{#WORKLOAD}}
| {{AGENT_NAME}} | {{TOTAL_HOURS}}h | {{SPRINT_COUNT}} | {{UTILIZATION_PERCENT}}% |
{{/WORKLOAD}}

**Load Balancing Notes**:
{{LOAD_BALANCING_NOTES}}

---

## Validation Strategy

### Per-Sprint Validation

{{#SPRINT_VALIDATIONS}}
#### Sprint {{SPRINT_ID}}: {{SPRINT_NAME}}

**Validation Type**: {{VALIDATION_TYPE}}

**Quality Gates**:
{{#QUALITY_GATES}}
- {{GATE_NAME}}: {{GATE_CRITERIA}}
{{/QUALITY_GATES}}

**Test Coverage**:
- Unit Tests: {{UNIT_TEST_COVERAGE}}%
- Integration Tests: {{INTEGRATION_TEST_COVERAGE}}%
- E2E Tests: {{E2E_TEST_COVERAGE}}%

**Exit Criteria**:
{{#EXIT_CRITERIA}}
- {{CRITERION}}
{{/EXIT_CRITERIA}}

{{/SPRINT_VALIDATIONS}}

### Cross-Sprint Integration Tests

{{#INTEGRATION_TESTS}}
- **{{TEST_NAME}}** (After Sprints {{SPRINT_IDS}})
  - Validates: {{VALIDATES}}
  - Test Suite: {{TEST_SUITE_PATH}}
{{/INTEGRATION_TESTS}}

---

## Optimization Opportunities

### Code Reuse Identified

{{#CODE_REUSE}}
#### {{PATTERN_NAME}}

**Existing Code**: `{{EXISTING_FILE}}`
**Reuse in Sprints**: {{SPRINT_IDS}}
**Estimated Time Saved**: {{TIME_SAVED}} hours
**Adaptation Required**: {{ADAPTATION_NOTES}}

{{/CODE_REUSE}}

### Performance Optimizations

{{#PERFORMANCE_OPTS}}
- **{{OPTIMIZATION_NAME}}** (Sprint {{SPRINT_ID}})
  - Impact: {{IMPACT}}
  - Implementation: {{IMPLEMENTATION}}
{{/PERFORMANCE_OPTS}}

### Dependency Management

{{#DEPENDENCIES}}
#### {{DEPENDENCY_NAME}}

**Type**: {{DEPENDENCY_TYPE}}
**Required By**: Sprint {{SPRINT_ID}}
**Installation Sprint**: {{INSTALLATION_SPRINT}}
**Version**: {{VERSION}}
**Rationale**: {{RATIONALE}}

{{/DEPENDENCIES}}

---

## Risk Management

### High-Risk Sprints

{{#HIGH_RISK_SPRINTS}}
#### Sprint {{SPRINT_ID}}: {{SPRINT_NAME}}

**Risk Level**: {{RISK_LEVEL}}

**Primary Risks**:
{{#RISKS}}
- {{RISK_DESCRIPTION}}
{{/RISKS}}

**Mitigation Plan**:
{{MITIGATION_PLAN}}

**Contingency**:
{{CONTINGENCY_PLAN}}

{{/HIGH_RISK_SPRINTS}}

### Dependency Risks

{{#DEPENDENCY_RISKS}}
- **{{RISK_TITLE}}**
  - If Sprint {{BLOCKER_SPRINT}} delays → Impacts: {{IMPACTED_SPRINTS}}
  - Severity: {{SEVERITY}}
  - Mitigation: {{MITIGATION}}
{{/DEPENDENCY_RISKS}}

---

## Revision History

| Timestamp | Version | Author | Changes |
|-----------|---------|--------|---------|
| {{CREATED_TIMESTAMP}} | 1.0 | {{AUTHOR}} | Initial sprint plan created |
{{#REVISIONS}}
| {{TIMESTAMP}} | {{VERSION}} | {{AUTHOR}} | {{CHANGES}} |
{{/REVISIONS}}

---

## Notes for Implementation

### Parallel Execution Guidelines

1. **Layer-by-Layer Execution**: Execute all sprints in Layer 1, then Layer 2, etc.
2. **Contract Locking**: Lock contracts before dependent sprints start
3. **Integration Points**: Run cross-sprint integration tests between layers
4. **Resource Contention**: Monitor agent workload to prevent bottlenecks
5. **Rollback Strategy**: Each sprint must be independently revertible

### Success Metrics

- **Sprint Success Rate**: {{SPRINT_SUCCESS_RATE_TARGET}}%
- **On-Time Completion**: {{ON_TIME_COMPLETION_TARGET}}%
- **Quality Gate Pass Rate**: {{QUALITY_GATE_PASS_RATE}}%
- **Test Coverage**: {{TEST_COVERAGE_TARGET}}%

### Communication Plan

{{COMMUNICATION_PLAN}}

---

**Generated by**: /plan command (meta-prompting)
**Epic Reference**: `epics/{{EPIC_SLUG}}/epic-spec.md`
**Implementation Command**: `/implement-epic {{EPIC_SLUG}}`
