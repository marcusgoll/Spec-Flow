<?xml version="1.0" encoding="UTF-8"?>
<!--
Epic Specification Template (v5.0)
LLM-optimized XML format for epic requirements and context
Generated by: /epic command
Referenced by: All subsequent epic phases
-->

<epic>
  <metadata>
    <number>{{EPIC_NUMBER}}</number>
    <slug>{{EPIC_SLUG}}</slug>
    <title>{{EPIC_TITLE}}</title>
    <type>{{TYPE}}</type> <!-- new-feature | enhancement | refactoring | infrastructure -->
    <complexity>{{COMPLEXITY}}</complexity> <!-- small | medium | large -->
    <created>{{CREATED_DATE}}</created>
    <github_issue>{{GITHUB_ISSUE_NUMBER}}</github_issue>
    <branch>{{BRANCH_NAME}}</branch>
  </metadata>

  <objective>
    <business_value>
      {{BUSINESS_VALUE}}
      <!-- What this delivers to users or business. Be specific about impact. -->
      <!-- Example: "Enable users to authenticate via social providers, reducing signup friction by 60%" -->
    </business_value>

    <success_metrics>
      {{SUCCESS_METRICS}}
      <!-- How we measure success. Include quantitative metrics. -->
      <!-- Example: "User signup completion rate increases from 40% to 70%" -->
      <!-- Example: "Authentication latency < 200ms p95" -->
    </success_metrics>

    <constraints>
      {{CONSTRAINTS}}
      <!-- Technical, time, or resource constraints -->
      <!-- Example: "Must support OAuth 2.1 spec" -->
      <!-- Example: "Budget: $2000 for external services" -->
      <!-- Example: "Deadline: 2025-12-01 for holiday feature freeze" -->
    </constraints>

    <out_of_scope>
      {{OUT_OF_SCOPE}}
      <!-- Explicitly list what this epic does NOT include to prevent scope creep -->
      <!-- Example: "MFA/2FA authentication (future epic)" -->
      <!-- Example: "Social provider analytics (not part of MVP)" -->
    </out_of_scope>
  </objective>

  <subsystems>
    <!-- Mark all subsystems involved in this epic -->
    <subsystem name="backend" involved="{{BACKEND_INVOLVED}}">
      {{BACKEND_CHANGES}}
      <!-- Example: "New /auth endpoints, JWT middleware, session storage" -->
    </subsystem>

    <subsystem name="frontend" involved="{{FRONTEND_INVOLVED}}">
      {{FRONTEND_CHANGES}}
      <!-- Example: "LoginForm component, OAuth redirect handling, auth state management" -->
    </subsystem>

    <subsystem name="database" involved="{{DATABASE_INVOLVED}}">
      {{DATABASE_CHANGES}}
      <!-- Example: "New sessions table, user_auth_providers table, indexes on email" -->
    </subsystem>

    <subsystem name="infrastructure" involved="{{INFRASTRUCTURE_INVOLVED}}">
      {{INFRASTRUCTURE_CHANGES}}
      <!-- Example: "OAuth app registration, environment variables, cookie configuration" -->
    </subsystem>

    <subsystem name="testing" involved="{{TESTING_INVOLVED}}">
      {{TESTING_CHANGES}}
      <!-- Example: "Integration tests for OAuth flow, E2E tests for login/logout" -->
    </subsystem>
  </subsystems>

  <clarifications>
    <!-- Auto-filled by /clarify phase if ambiguities detected -->
    <!-- Format: One clarification per question/answer pair -->
    {{#CLARIFICATIONS}}
    <clarification timestamp="{{TIMESTAMP}}">
      <question>{{QUESTION}}</question>
      <answer>{{ANSWER}}</answer>
      <impact>{{IMPACT}}</impact> <!-- How this affects implementation -->
    </clarification>
    {{/CLARIFICATIONS}}
  </clarifications>

  <dependencies>
    <!-- External dependencies that must be resolved before or during epic -->
    {{#DEPENDENCIES}}
    <dependency type="{{TYPE}}" status="{{STATUS}}">
      <!-- type: external_service | internal_api | infrastructure | team -->
      <!-- status: pending | in_progress | resolved | blocked -->
      <description>{{DESCRIPTION}}</description>
      <owner>{{OWNER}}</owner>
      <resolution_date>{{RESOLUTION_DATE}}</resolution_date>
      <blocker>{{IS_BLOCKER}}</blocker> <!-- true | false -->
    </dependency>
    {{/DEPENDENCIES}}
  </dependencies>

  <assumptions>
    <!-- Technical or business assumptions made during epic definition -->
    <!-- These should be validated during research/planning phases -->
    {{#ASSUMPTIONS}}
    <assumption id="{{ID}}" validated="{{VALIDATED}}">
      <statement>{{STATEMENT}}</statement>
      <validation_method>{{VALIDATION_METHOD}}</validation_method>
      <risk_if_false>{{RISK}}</risk> <!-- low | medium | high -->
    </assumption>
    {{/ASSUMPTIONS}}
  </assumptions>

  <stakeholders>
    <!-- Who cares about this epic -->
    {{#STAKEHOLDERS}}
    <stakeholder role="{{ROLE}}">
      <name>{{NAME}}</name>
      <interest>{{INTEREST}}</interest> <!-- What they care about -->
      <communication>{{COMMUNICATION_PLAN}}</communication> <!-- When to update them -->
    </stakeholder>
    {{/STAKEHOLDERS}}
  </stakeholders>

  <project_context>
    <!-- Auto-populated from project docs for LLM context -->
    <tech_stack>
      <reference>@docs/project/tech-stack.md</reference>
      <summary>{{TECH_STACK_SUMMARY}}</summary>
    </tech_stack>

    <architecture>
      <reference>@docs/project/system-architecture.md</reference>
      <summary>{{ARCHITECTURE_SUMMARY}}</summary>
    </architecture>

    <api_strategy>
      <reference>@docs/project/api-strategy.md</reference>
      <summary>{{API_STRATEGY_SUMMARY}}</summary>
    </api_strategy>

    <data_architecture>
      <reference>@docs/project/data-architecture.md</reference>
      <summary>{{DATA_ARCHITECTURE_SUMMARY}}</summary>
    </data_architecture>
  </project_context>

  <history>
    <!-- Epic lifecycle events for audit trail -->
    <event type="created" timestamp="{{CREATED_TIMESTAMP}}" actor="{{ACTOR}}">
      Epic specification created
    </event>

    {{#HISTORY_EVENTS}}
    <event type="{{TYPE}}" timestamp="{{TIMESTAMP}}" actor="{{ACTOR}}">
      <!-- type: clarified | researched | planned | sprint_created | implemented | deployed | finalized -->
      {{EVENT_DESCRIPTION}}
    </event>
    {{/HISTORY_EVENTS}}
  </history>
</epic>
